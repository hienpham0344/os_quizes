<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OS Quiz Master - By PhamHien</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #2563eb; --secondary: #64748b; --success: #10b981; --error: #ef4444; --dark: #0f172a; }
        body { font-family: 'Inter', system-ui, sans-serif; background: var(--dark); color: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden; }
        .card { background: #ffffff; color: #1e293b; padding: 2rem; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 95%; max-width: 650px; min-height: 520px; display: flex; flex-direction: column; position: relative; z-index: 10; box-sizing: border-box; }
        #start-menu { text-align: center; display: flex; flex-direction: column; justify-content: center; flex-grow: 1; }
        .author-tag { color: var(--primary); font-weight: 700; letter-spacing: 2px; margin-bottom: 10px; }
        h1 { font-size: 2.2rem; margin: 0 0 10px 0; color: #0f172a; }
        #quiz-content { display: none; flex-grow: 1; }
        .progress-container { height: 6px; background: #e2e8f0; border-radius: 3px; margin-bottom: 20px; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.4s ease; }
        .q-text { font-size: 1.1rem; font-weight: 600; line-height: 1.5; margin-bottom: 20px; color: #334155; min-height: 90px; }
        .blank-space { color: var(--primary); border-bottom: 2px solid var(--primary); padding: 0 5px; font-weight: 800; }
        input[type="text"] { width: 100%; padding: 16px; border: 2px solid #cbd5e1; border-radius: 12px; font-size: 1.1rem; margin-bottom: 15px; transition: all 0.2s; box-sizing: border-box; }
        input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        .btn-group { display: flex; gap: 10px; }
        button { padding: 14px 20px; border: none; border-radius: 12px; cursor: pointer; font-size: 1rem; font-weight: 700; transition: 0.2s; }
        .btn-main { background: var(--primary); color: white; flex: 2; }
        .btn-skip { background: #f1f5f9; color: var(--secondary); flex: 1; }
        .btn-next { background: var(--dark); color: white; width: 100%; display: none; }
        .feedback { padding: 15px; border-radius: 10px; margin: 15px 0; font-weight: 600; display: none; font-size: 0.95rem; }
        .correct { background: #dcfce7; color: #166534; }
        .wrong { background: #fee2e2; color: #991b1b; }
        .made-by { text-align: center; font-size: 0.8rem; color: #94a3b8; margin-top: 20px; }
    </style>
</head>
<body>

<div class="card">
    <div id="start-menu">
        <div class="author-tag">Pham Hien PRESENTS</div>
        <h1>OS EXAM MASTER</h1>
        <p style="color: #64748b; margin-bottom: 30px;">To√†n b·ªô c√¢u h·ªèi √¥n thi (Sync, Deadlock, Memory, VM, CPU, Disk).<br>(Answer: English)</p>
        <button class="btn-main" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U √îN THI</button>
    </div>

    <div id="quiz-content">
        <div class="progress-container"><div class="progress-fill" id="p-fill"></div></div>
        <div id="status" style="display:flex; justify-content: space-between; font-size: 0.85rem; color: #64748b; margin-bottom: 10px;">
            <span id="q-number">C√¢u h·ªèi 1/--</span>
            <span id="score">ƒêi·ªÉm: 0</span>
        </div>
        <div class="q-text" id="q-text">ƒêang t·∫£i...</div>
        <input type="text" id="user-input" placeholder="Nh·∫≠p ƒë√°p √°n..." autocomplete="off">
        <div id="feedback" class="feedback"></div>
        <div class="btn-group" id="action-buttons">
            <button class="btn-main" id="btn-check" onclick="checkAnswer()">KI·ªÇM TRA (Enter)</button>
            <button class="btn-skip" id="btn-skip" onclick="skipQuestion()">XEM ƒê√ÅP √ÅN</button>
        </div>
        <button class="btn-next" id="btn-next" onclick="nextQuestion()">C√ÇU TI·∫æP THEO ‚Üí</button>
    </div>
    <div class="made-by">Made by PhamHien</div>
</div>

<script>
    const masterData = [
        // --- 52 C√ÇU H·ªéI G·ªêC C·ª¶A B·∫†N (GI·ªÆ NGUY√äN) ---
        { q: "T√¨nh hu·ªëng nhi·ªÅu ti·∫øn tr√¨nh c√πng truy c·∫≠p v√† thay ƒë·ªïi d·ªØ li·ªáu chung, k·∫øt qu·∫£ ph·ª• thu·ªôc v√†o th·ª© t·ª± th·ª±c thi g·ªçi l√† ____ condition.", a: "race", hint: "ƒêi·ªÅu ki·ªán ch·∫°y ƒëua." },
        { q: "ƒêo·∫°n m√£ trong ti·∫øn tr√¨nh c√≥ truy c·∫≠p ƒë·∫øn t√†i nguy√™n chung ƒë∆∞·ª£c g·ªçi l√† ____ section.", a: "critical", hint: "V√πng gƒÉng / V√πng tranh ch·∫•p." },
        { q: "Y√™u c·∫ßu ƒë·∫£m b·∫£o ch·ªâ m·ªôt ti·∫øn tr√¨nh ƒë∆∞·ª£c ·ªü trong v√πng tranh ch·∫•p t·∫°i m·ªôt th·ªùi ƒëi·ªÉm l√† ____ exclusion.", a: "mutual", hint: "Lo·∫°i tr·ª´ t∆∞∆°ng h·ªó." },
        { q: "Gi·∫£i ph√°p ph·∫ßn m·ªÅm cho 2 ti·∫øn tr√¨nh ƒë·ªÉ gi·∫£i quy·∫øt v√πng tranh ch·∫•p l√† ____'s solution.", a: "peterson", hint: "T√™n m·ªôt thu·∫≠t to√°n c·ªï ƒëi·ªÉn." },
        { q: "M·ªôt bi·∫øn nguy√™n t·ª≠ ƒë∆∞·ª£c d√πng ƒë·ªÉ qu·∫£n l√Ω truy c·∫≠p v√πng tranh ch·∫•p (kh√≥a) g·ªçi l√† ____ lock.", a: "mutex", hint: "Vi·∫øt t·∫Øt c·ªßa MUTual EXclusion." },
        { q: "Hi·ªán t∆∞·ª£ng ti·∫øn tr√¨nh li√™n t·ª•c ki·ªÉm tra ƒëi·ªÅu ki·ªán trong v√≤ng l·∫∑p khi ch·ªù kh√≥a g·ªçi l√† ____ waiting.", a: "busy", hint: "Ch·ªù b·∫≠n." },
        { q: "Lo·∫°i kh√≥a mutex s·ª≠ d·ª•ng busy waiting ƒë∆∞·ª£c g·ªçi l√† ______lock.", a: "spin", hint: "Kh√≥a xoay." },
        { q: "C√¥ng c·ª• ƒë·ªìng b·ªô h√≥a t·ªïng qu√°t h∆°n mutex, l√† m·ªôt bi·∫øn s·ªë nguy√™n, g·ªçi l√† ____.", a: "semaphore", hint: "ƒê√®n b√°o hi·ªáu." },
        { q: "Thao t√°c tr√™n semaphore ƒë·ªÉ gi·∫£m gi√° tr·ªã (ch·ªù) ƒë∆∞·ª£c g·ªçi l√† ____.", a: "wait", hint: "Ho·∫∑c g·ªçi l√† P()." },
        { q: "Thao t√°c tr√™n semaphore ƒë·ªÉ tƒÉng gi√° tr·ªã (b√°o hi·ªáu) ƒë∆∞·ª£c g·ªçi l√† ____.", a: "signal", hint: "Ho·∫∑c g·ªçi l√† V()." },
        { q: "C·∫•u tr√∫c d·ªØ li·ªáu cao c·∫•p (abstract data type) bao g·ªìm th·ªß t·ª•c v√† bi·∫øn ƒëi·ªÅu ki·ªán ƒë·ªÉ ƒë·ªìng b·ªô h√≥a l√† ____.", a: "monitor", hint: "Gi√°m s√°t." },
        { q: "B√†i to√°n ƒë·ªìng b·ªô kinh ƒëi·ªÉn m√¥ ph·ªèng 5 tri·∫øt gia ng·ªìi ƒÉn t·ªëi l√† ____ Philosophers.", a: "dining", hint: "C√°c tri·∫øt gia ƒÉn t·ªëi." },
        { q: "T√¨nh tr·∫°ng c√°c ti·∫øn tr√¨nh ch·ªù ƒë·ª£i nhau v√¥ h·∫°n v√¨ m·ªói b√™n gi·ªØ t√†i nguy√™n b√™n kia c·∫ßn l√† ____.", a: "deadlock", hint: "T·∫Øc ngh·∫Ωn." },
        { q: "ƒêi·ªÅu ki·ªán deadlock: Ti·∫øn tr√¨nh gi·ªØ √≠t nh·∫•t 1 t√†i nguy√™n v√† ch·ªù th√™m t√†i nguy√™n kh√°c l√† ____ and wait.", a: "hold", hint: "Gi·ªØ v√† ch·ªù." },
        { q: "ƒêi·ªÅu ki·ªán deadlock: T√†i nguy√™n kh√¥ng th·ªÉ b·ªã t∆∞·ªõc ƒëo·∫°t t·ª´ ti·∫øn tr√¨nh ƒëang gi·ªØ n√≥ l√† no ____.", a: "preemption", hint: "Kh√¥ng tr∆∞ng d·ª•ng/t∆∞·ªõc ƒëo·∫°t." },
        { q: "ƒêi·ªÅu ki·ªán deadlock: C√≥ m·ªôt chu·ªói c√°c ti·∫øn tr√¨nh ch·ªù ƒë·ª£i l·∫´n nhau theo v√≤ng tr√≤n l√† ____ wait.", a: "circular", hint: "Ch·ªù ƒë·ª£i v√≤ng tr√≤n." },
        { q: "Bi·ªÉu ƒë·ªì d√πng ƒë·ªÉ m√¥ t·∫£ tr·∫°ng th√°i c·∫•p ph√°t t√†i nguy√™n l√† Resource ____ Graph.", a: "allocation", hint: "ƒê·ªì th·ªã c·∫•p ph√°t." },
        { q: "Ph∆∞∆°ng ph√°p x·ª≠ l√Ω deadlock b·∫±ng c√°ch ƒë·∫£m b·∫£o h·ªá th·ªëng kh√¥ng bao gi·ªù r∆°i v√†o tr·∫°ng th√°i kh√¥ng an to√†n l√† deadlock ____.", a: "avoidance", hint: "Tr√°nh t·∫Øc ngh·∫Ωn." },
        { q: "Thu·∫≠t to√°n kinh ƒëi·ªÉn ƒë·ªÉ tr√°nh deadlock b·∫±ng c√°ch gi·∫£ l·∫≠p c·∫•p ph√°t l√† ____'s Algorithm.", a: "banker", hint: "Thu·∫≠t to√°n nh√† bƒÉng." },
        { q: "Trong thu·∫≠t to√°n Banker, n·∫øu h·ªá th·ªëng c√≥ th·ªÉ t√¨m ƒë∆∞·ª£c chu·ªói th·ª±c thi an to√†n, tr·∫°ng th√°i ƒë√≥ g·ªçi l√† ____ state.", a: "safe", hint: "Tr·∫°ng th√°i an to√†n." },
        { q: "Ph∆∞∆°ng ph√°p cho ph√©p deadlock x·∫£y ra r·ªìi m·ªõi t√¨m v√† x·ª≠ l√Ω g·ªçi l√† deadlock ____.", a: "detection", hint: "Ph√°t hi·ªán t·∫Øc ngh·∫Ωn." },
        { q: "Hi·ªán t∆∞·ª£ng m·ªôt ti·∫øn tr√¨nh ch·ªù ƒë·ª£i qu√° l√¢u m√† kh√¥ng ƒë∆∞·ª£c c·∫•p ph√°t t√†i nguy√™n (do ƒë·ªô ∆∞u ti√™n th·∫•p) l√† ____.", a: "starvation", hint: "ƒê√≥i t√†i nguy√™n." },
        { q: "ƒê·ªãa ch·ªâ do CPU t·∫°o ra ƒë∆∞·ª£c g·ªçi l√† ____ address.", a: "logical", hint: "ƒê·ªãa ch·ªâ logic (ho·∫∑c ·∫£o)." },
        { q: "ƒê·ªãa ch·ªâ th·ª±c t·∫ø tr√™n thanh RAM ƒë∆∞·ª£c g·ªçi l√† ____ address.", a: "physical", hint: "ƒê·ªãa ch·ªâ v·∫≠t l√Ω." },
        { q: "Thi·∫øt b·ªã ph·∫ßn c·ª©ng th·ª±c hi·ªán √°nh x·∫° ƒë·ªãa ch·ªâ logic sang v·∫≠t l√Ω l√† ____.", a: "mmu", hint: "Vi·∫øt t·∫Øt Memory Management Unit." },
        { q: "Hi·ªán t∆∞·ª£ng t·ªïng b·ªô nh·ªõ tr·ªëng ƒë·ªß nh∆∞ng kh√¥ng li√™n t·ª•c n√™n kh√¥ng c·∫•p ph√°t ƒë∆∞·ª£c l√† ____ fragmentation.", a: "external", hint: "Ph√¢n m·∫£nh ngo·∫°i vi." },
        { q: "K·ªπ thu·∫≠t d·ªìn c√°c v√πng nh·ªõ tr·ªëng l·∫°i v·ªõi nhau ƒë·ªÉ gi·∫£m ph√¢n m·∫£nh ngo·∫°i vi l√† ____.", a: "compaction", hint: "D·ªìn b·ªô nh·ªõ." },
        { q: "C∆° ch·∫ø qu·∫£n l√Ω b·ªô nh·ªõ chia RAM th√†nh c√°c kh·ªëi k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh l√† ____.", a: "paging", hint: "Ph√¢n trang." },
        { q: "C√°c kh·ªëi k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh trong b·ªô nh·ªõ v·∫≠t l√Ω (RAM) g·ªçi l√† ____.", a: "frames", hint: "Khung trang." },
        { q: "C√°c kh·ªëi c√πng k√≠ch th∆∞·ªõc trong b·ªô nh·ªõ logic c·ªßa ti·∫øn tr√¨nh g·ªçi l√† ____.", a: "pages", hint: "Trang." },
        { q: "ƒê·ªãa ch·ªâ logic trong ph√¢n trang g·ªìm: Page number v√† Page ____.", a: "offset", hint: "ƒê·ªô d·ªùi (offset)." },
        { q: "C·∫•u tr√∫c d·ªØ li·ªáu d√πng ƒë·ªÉ √°nh x·∫° s·ªë trang sang s·ªë khung l√† ____ table.", a: "page", hint: "B·∫£ng trang." },
        { q: "B·ªô nh·ªõ ƒë·ªám ph·∫ßn c·ª©ng t·ªëc ƒë·ªô cao gi√∫p tra c·ª©u b·∫£ng trang nhanh h∆°n l√† ____.", a: "tlb", hint: "Translation Lookaside Buffer." },
        { q: "Hi·ªán t∆∞·ª£ng b·ªô nh·ªõ d∆∞ th·ª´a b√™n trong m·ªôt frame (do k√≠ch th∆∞·ªõc ti·∫øn tr√¨nh kh√¥ng chia h·∫øt cho frame) l√† ____ fragmentation.", a: "internal", hint: "Ph√¢n m·∫£nh n·ªôi vi." },
        { q: "Ph∆∞∆°ng ph√°p qu·∫£n l√Ω b·ªô nh·ªõ d·ª±a tr√™n g√≥c nh√¨n logic c·ªßa l·∫≠p tr√¨nh vi√™n (chia th√†nh h√†m, stack...) l√† ____.", a: "segmentation", hint: "Ph√¢n ƒëo·∫°n." },
        { q: "Trong b·∫£ng ph√¢n ƒëo·∫°n, m·ªói d√≤ng ch·ª©a Base v√† ____.", a: "limit", hint: "Gi·ªõi h·∫°n ƒë·ªô d√†i ƒëo·∫°n." },
        { q: "Thanh ghi l∆∞u ƒë·ªãa ch·ªâ b·∫Øt ƒë·∫ßu c·ªßa b·∫£ng trang trong b·ªô nh·ªõ l√† ____.", a: "ptbr", hint: "Page-Table Base Register." },
        { q: "C∆° ch·∫ø cho ph√©p ch·∫°y ·ª©ng d·ª•ng c√≥ k√≠ch th∆∞·ªõc l·ªõn h∆°n dung l∆∞·ª£ng RAM v·∫≠t l√Ω l√† ____ memory.", a: "virtual", hint: "B·ªô nh·ªõ ·∫£o." },
        { q: "K·ªπ thu·∫≠t ch·ªâ n·∫°p trang v√†o RAM khi ti·∫øn tr√¨nh th·ª±c s·ª± truy c·∫≠p ƒë·∫øn n√≥ l√† ____ paging.", a: "demand", hint: "N·∫°p trang theo y√™u c·∫ßu." },
        { q: "L·ªói ng·∫Øt x·∫£y ra khi ti·∫øn tr√¨nh truy c·∫≠p v√†o m·ªôt trang ch∆∞a c√≥ trong RAM l√† Page ____.", a: "fault", hint: "L·ªói trang." },
        { q: "V√πng kh√¥ng gian tr√™n ƒëƒ©a c·ª©ng d√πng ƒë·ªÉ ch·ª©a c√°c trang b·ªã ƒë·∫©y ra t·ª´ RAM g·ªçi l√† ____ space.", a: "swap", hint: "V√πng tr√°o ƒë·ªïi." },
        { q: "C∆° ch·∫ø cho ph√©p cha v√† con d√πng chung trang nh·ªõ ban ƒë·∫ßu, ch·ªâ sao ch√©p khi c√≥ thay ƒë·ªïi l√† ______-on-Write.", a: "copy", hint: "Vi·∫øt t·∫Øt COW." },
        { q: "Thu·∫≠t to√°n thay th·∫ø trang ƒë∆°n gi·∫£n nh·∫•t, trang n√†o v√†o tr∆∞·ªõc ra tr∆∞·ªõc l√† ____.", a: "fifo", hint: "First-In, First-Out." },
        { q: "Thu·∫≠t to√°n thay th·∫ø trang l√Ω thuy·∫øt (kh√¥ng th·ª±c t·∫ø), thay th·∫ø trang s·∫Ω kh√¥ng ƒë∆∞·ª£c d√πng l√¢u nh·∫•t trong t∆∞∆°ng lai l√† ____.", a: "optimal", hint: "T·ªëi ∆∞u (OPT)." },
        { q: "Thu·∫≠t to√°n thay th·∫ø trang d·ª±a tr√™n qu√° kh·ª©, thay th·∫ø trang ch∆∞a ƒë∆∞·ª£c d√πng l√¢u nh·∫•t l√† ____.", a: "lru", hint: "Least Recently Used." },
        { q: "Bit ƒë∆∞·ª£c g·∫Øn v·ªõi m·ªói trang ƒë·ªÉ h·ªó tr·ª£ thu·∫≠t to√°n x·∫•p x·ªâ LRU (Second-chance) l√† ____ bit.", a: "reference", hint: "Bit tham chi·∫øu." },
        { q: "Ngh·ªãch l√Ω khi tƒÉng s·ªë l∆∞·ª£ng frame c·∫•p ph√°t nh∆∞ng s·ªë l∆∞·ª£ng l·ªói trang l·∫°i tƒÉng l√™n l√† ____'s Anomaly.", a: "belady", hint: "Ngh·ªãch l√Ω Belady." },
        { q: "Hi·ªán t∆∞·ª£ng h·ªá th·ªëng b·∫≠n r·ªôn v·ªõi vi·ªác tr√°o ƒë·ªïi trang (paging in/out) li√™n t·ª•c khi·∫øn hi·ªáu su·∫•t CPU gi·∫£m m·∫°nh l√† ____.", a: "thrashing", hint: "Tr√¨ tr·ªá h·ªá th·ªëng." },
        { q: "M√¥ h√¨nh d·ª±a tr√™n t√≠nh c·ª•c b·ªô ƒë·ªÉ x√°c ƒë·ªãnh s·ªë l∆∞·ª£ng frame c·∫ßn thi·∫øt cho ti·∫øn tr√¨nh nh·∫±m tr√°nh Thrashing l√† ______-set model.", a: "working", hint: "T·∫≠p l√†m vi·ªác." },
        { q: "T·ª∑ l·ªá t√¨m th·∫•y trang trong TLB ƒë∆∞·ª£c g·ªçi l√† ____ ratio.", a: "hit", hint: "T·ª∑ l·ªá tr√∫ng." },
        { q: "Th·ªùi gian trung b√¨nh ƒë·ªÉ truy c·∫≠p b·ªô nh·ªõ, t√≠nh c·∫£ th·ªùi gian x·ª≠ l√Ω page fault, g·ªçi l√† ____ Access Time.", a: "effective", hint: "EAT." },
        { q: "Ch∆∞∆°ng tr√¨nh h·ªá th·ªëng ch·ªãu tr√°ch nhi·ªám chuy·ªÉn trang gi·ªØa RAM v√† ƒëƒ©a g·ªçi l√† ____.", a: "pager", hint: "M·ªôt lo·∫°i swapper l∆∞·ªùi (lazy swapper)." },
        { q: "Bit d√πng ƒë·ªÉ ƒë√°nh d·∫•u m·ªôt trang ƒëang n·∫±m trong RAM (v) hay kh√¥ng (i) l√† ______-invalid bit.", a: "valid", hint: "H·ª£p l·ªá / Kh√¥ng h·ª£p l·ªá." },
        { q: "Trong Demand Paging, n·∫øu bit tr·∫°ng th√°i l√† 'i' (invalid), truy c·∫≠p s·∫Ω g√¢y ra ____.", a: "trap", hint: "M·ªôt lo·∫°i ng·∫Øt ph·∫ßn m·ªÅm g·ª≠i t·ªõi OS." },
        { q: "Chi·∫øn l∆∞·ª£c kh√¥ng bao gi·ªù n·∫°p trang v√†o RAM cho ƒë·∫øn khi n√≥ ƒë∆∞·ª£c tham chi·∫øu l·∫ßn ƒë·∫ßu g·ªçi l√† ____ demand paging.", a: "pure", hint: "Ph√¢n trang theo y√™u c·∫ßu thu·∫ßn t√∫y." },
        { q: "Khi x·∫£y ra l·ªói trang (page fault), h·ªá ƒëi·ªÅu h√†nh ph·∫£i t√¨m m·ªôt ____ frame c√≤n tr·ªëng ƒë·ªÉ n·∫°p trang v√†o.", a: "free", hint: "Khung trang t·ª± do/tr·ªëng." },
        { q: "Thu·∫≠t to√°n ƒë·∫øm s·ªë l·∫ßn s·ª≠ d·ª•ng trang, thay th·∫ø trang c√≥ s·ªë l·∫ßn d√πng √≠t nh·∫•t l√† ____.", a: "lfu", hint: "Least Frequently Used." },
        { q: "Ph∆∞∆°ng ph√°p c·∫•p ph√°t frame cho ph√©p m·ªôt ti·∫øn tr√¨nh l·∫•y frame c·ªßa ti·∫øn tr√¨nh kh√°c l√† ____ allocation.", a: "global", hint: "C·∫•p ph√°t to√†n c·ª•c." },
        { q: "Ph∆∞∆°ng ph√°p c·∫•p ph√°t frame ch·ªâ cho ph√©p ti·∫øn tr√¨nh thay th·∫ø c√°c trang c·ªßa ch√≠nh n√≥ l√† ____ allocation.", a: "local", hint: "C·∫•p ph√°t c·ª•c b·ªô." },
        { q: "Nguy√™n nh√¢n ch√≠nh d·∫´n ƒë·∫øn Thrashing l√† do m·ª©c ƒë·ªô ƒëa ch∆∞∆°ng (degree of multiprogramming) qu√° ____.", a: "high", hint: "Cao." },
        { q: "H√†m h·ªá th·ªëng trong Unix/Linux t·∫°o ra ti·∫øn tr√¨nh con s·ª≠ d·ª•ng k·ªπ thu·∫≠t Copy-on-Write l√† ______().", a: "fork", hint: "L·ªánh t·∫°o ti·∫øn tr√¨nh con." },

        // --- C√ÅC C√ÇU H·ªéI B·ªî SUNG QUAN TR·ªåNG ƒê·ªÇ ƒêI THI ---
        { q: "Thu·∫≠t to√°n l·∫≠p l·ªãch CPU ƒë∆°n gi·∫£n nh·∫•t, ti·∫øn tr√¨nh n√†o ƒë·∫øn tr∆∞·ªõc ƒë∆∞·ª£c ph·ª•c v·ª• tr∆∞·ªõc l√† ____.", a: "fcfs", hint: "First-Come, First-Served." },
        { q: "Thu·∫≠t to√°n l·∫≠p l·ªãch CPU ∆∞u ti√™n ti·∫øn tr√¨nh c√≥ th·ªùi gian th·ª±c thi ng·∫Øn nh·∫•t l√† ____.", a: "sjf", hint: "Shortest Job First." },
        { q: "Thu·∫≠t to√°n l·∫≠p l·ªãch CPU thi·∫øt k·∫ø cho h·ªá th·ªëng chia s·∫ª th·ªùi gian, m·ªói ti·∫øn tr√¨nh nh·∫≠n m·ªôt l√°t c·∫Øt th·ªùi gian g·ªçi l√† Round ____.", a: "robin", hint: "L·∫≠p l·ªãch v√≤ng tr√≤n." },
        { q: "Kho·∫£ng th·ªùi gian m·ªôt ti·∫øn tr√¨nh nh·∫≠n ƒë∆∞·ª£c ƒë·ªÉ th·ª±c thi trong Round Robin g·ªçi l√† time ____.", a: "quantum", hint: "L√°t c·∫Øt th·ªùi gian." },
        { q: "Thu·∫≠t to√°n l·∫≠p l·ªãch ƒëƒ©a (Disk Scheduling) ph·ª•c v·ª• c√°c y√™u c·∫ßu theo th·ª© t·ª± ƒë·∫øn l√† ____.", a: "fcfs", hint: "Gi·ªëng l·∫≠p l·ªãch CPU." },
        { q: "Thu·∫≠t to√°n l·∫≠p l·ªãch ƒëƒ©a di chuy·ªÉn ƒë·∫ßu ƒë·ªçc t·ª´ ƒë·∫ßu ƒë·∫øn cu·ªëi ƒëƒ©a r·ªìi quay l·∫°i nh∆∞ m·ªôt thang m√°y g·ªçi l√† ____.", a: "scan", hint: "Thu·∫≠t to√°n thang m√°y." },
        { q: "C·∫•u tr√∫c d·ªØ li·ªáu c·ªßa h·ªá ƒëi·ªÅu h√†nh d√πng ƒë·ªÉ qu·∫£n l√Ω th√¥ng tin c·ªßa m·ªôt ti·∫øn tr√¨nh l√† ____.", a: "pcb", hint: "Process Control Block." },
        { q: "Vi·ªác chuy·ªÉn ƒë·ªïi CPU t·ª´ ti·∫øn tr√¨nh n√†y sang ti·∫øn tr√¨nh kh√°c g·ªçi l√† ____ switch.", a: "context", hint: "Chuy·ªÉn ƒë·ªïi ng·ªØ c·∫£nh." }
    ];

    let quizData = [];
    let currentIdx = 0;
    let currentScore = 0;

    function startQuiz() {
        quizData = [...masterData].sort(() => Math.random() - 0.5);
        currentIdx = 0;
        currentScore = 0;
        document.getElementById('start-menu').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        loadQuestion();
    }

    function loadQuestion() {
        const data = quizData[currentIdx];
        document.getElementById('q-text').innerHTML = data.q.replace("____", "<span class='blank-space'>...</span>");
        document.getElementById('user-input').value = "";
        document.getElementById('user-input').disabled = false;
        document.getElementById('feedback').style.display = 'none';
        document.getElementById('btn-next').style.display = 'none';
        document.getElementById('action-buttons').style.display = 'flex';
        document.getElementById('q-number').innerText = `C√¢u h·ªèi ${currentIdx + 1}/${quizData.length}`;
        document.getElementById('p-fill').style.width = `${((currentIdx + 1) / quizData.length) * 100}%`;
        setTimeout(() => document.getElementById('user-input').focus(), 10);
    }

    function checkAnswer() {
        const userValue = document.getElementById('user-input').value.trim().toLowerCase();
        const correctAnswer = quizData[currentIdx].a.toLowerCase();
        const feedback = document.getElementById('feedback');
        if (userValue === "") return;
        if (userValue === correctAnswer) {
            feedback.innerText = "Ch√≠nh x√°c! üéâ";
            feedback.className = "feedback correct";
            currentScore += 1;
            document.getElementById('score').innerText = `ƒêi·ªÉm: ${currentScore}`;
            confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
            showNextState();
        } else {
            feedback.innerText = "Sai r·ªìi! G·ª£i √Ω: " + quizData[currentIdx].hint;
            feedback.className = "feedback wrong";
        }
        feedback.style.display = 'block';
    }

    function skipQuestion() {
        const feedback = document.getElementById('feedback');
        feedback.innerText = "ƒê√°p √°n ƒë√∫ng l√†: " + quizData[currentIdx].a.toUpperCase();
        feedback.className = "feedback";
        feedback.style.background = "#f1f5f9";
        feedback.style.display = 'block';
        showNextState();
    }

    function showNextState() {
        document.getElementById('user-input').disabled = true;
        document.getElementById('action-buttons').style.display = 'none';
        document.getElementById('btn-next').style.display = 'block';
        document.getElementById('btn-next').focus();
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < quizData.length) loadQuestion();
        else showResult();
    }

    function showResult() {
        document.getElementById('quiz-content').innerHTML = `
            <div style="text-align: center; padding: 20px;">
                <h2>K·∫æT TH√öC √îN T·∫¨P!</h2>
                <div style="font-size: 3.5rem; color: var(--primary); font-weight: 800; margin: 20px 0;">${currentScore}/${quizData.length}</div>
                <p>B·∫°n ƒë√£ s·∫µn s√†ng cho k·ª≥ thi OS.</p>
                <button class="btn-main" onclick="location.reload()">L√ÄM L·∫†I</button>
            </div>`;
        confetti({ particleCount: 200, spread: 100, origin: { y: 0.5 } });
    }

    document.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            if (document.getElementById('start-menu').style.display !== 'none') startQuiz();
            else if (document.getElementById('action-buttons').style.display !== 'none') checkAnswer();
            else nextQuestion();
        }
    });
</script>
</body>
</html>
