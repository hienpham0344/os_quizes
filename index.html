<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OS Quiz Pro - By PhamHien</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { --primary: #2563eb; --secondary: #64748b; --success: #10b981; --error: #ef4444; --dark: #0f172a; }
        body { font-family: 'Inter', system-ui, sans-serif; background: var(--dark); color: #fff; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; overflow: hidden; }
        .card { background: #ffffff; color: #1e293b; padding: 2.5rem; border-radius: 24px; box-shadow: 0 20px 50px rgba(0,0,0,0.3); width: 100%; max-width: 650px; min-height: 480px; display: flex; flex-direction: column; position: relative; z-index: 10; }
        
        #start-menu { text-align: center; display: flex; flex-direction: column; justify-content: center; height: 100%; }
        .author-tag { color: var(--primary); font-weight: 700; letter-spacing: 2px; margin-bottom: 10px; }
        h1 { font-size: 2.5rem; margin: 0 0 20px 0; color: #0f172a; }
        
        #quiz-content { display: none; }
        .progress-container { height: 6px; background: #e2e8f0; border-radius: 3px; margin-bottom: 25px; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.4s ease; }
        .q-text { font-size: 1.25rem; font-weight: 600; line-height: 1.6; margin-bottom: 20px; color: #334155; height: 80px; }
        .blank-space { color: var(--primary); border-bottom: 2px solid var(--primary); padding: 0 10px; font-weight: 800; }
        
        input[type="text"] { width: 100%; padding: 16px; border: 2px solid #cbd5e1; border-radius: 12px; font-size: 1.1rem; margin-bottom: 15px; transition: all 0.2s; box-sizing: border-box; }
        input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); }
        
        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        button { padding: 14px 28px; border: none; border-radius: 12px; cursor: pointer; font-size: 1rem; font-weight: 700; transition: 0.2s; }
        .btn-main { background: var(--primary); color: white; flex: 2; }
        .btn-skip { background: #f1f5f9; color: var(--secondary); flex: 1; }
        .btn-next { background: var(--dark); color: white; width: 100%; display: none; }
        button:hover { filter: brightness(1.1); transform: translateY(-1px); }

        .feedback { padding: 15px; border-radius: 10px; margin-top: 15px; font-weight: 600; display: none; }
        .correct { background: #dcfce7; color: #166534; }
        .wrong { background: #fee2e2; color: #991b1b; }
        .made-by { text-align: center; margin-top: auto; font-size: 0.8rem; color: #94a3b8; padding-top: 20px; }
    </style>
</head>
<body>

<div class="card">
    <div id="start-menu">
        <div class="author-tag">Pham Hien PRESENTS</div>
        <h1>OS QUIZ: MEMORY</h1>
        <p style="color: #64748b; margin-bottom: 30px;">H·ªá th·ªëng c√¢u h·ªèi ng·∫´u nhi√™n.<br>(Question: Vietnamese | Answer: English)</p>
        <button class="btn-main" onclick="startQuiz()">B·∫ÆT ƒê·∫¶U √îN T·∫¨P</button>
    </div>

    <div id="quiz-content">
        <div class="progress-container"><div class="progress-fill" id="p-fill"></div></div>
        <div id="status" style="display:flex; justify-content: space-between; font-size: 0.85rem; color: #64748b; margin-bottom: 10px;">
            <span id="q-number">C√¢u h·ªèi 1/20</span>
            <span id="score">ƒêi·ªÉm: 0</span>
        </div>
        
        <div class="q-text" id="q-text">ƒêang t·∫£i c√¢u h·ªèi...</div>
        <input type="text" id="user-input" placeholder="Nh·∫≠p ƒë√°p √°n ti·∫øng Anh..." autocomplete="off">
        
        <div id="feedback" class="feedback"></div>
        
        <div class="btn-group" id="action-buttons">
            <button class="btn-main" id="btn-check" onclick="checkAnswer()">KI·ªÇM TRA (Enter)</button>
            <button class="btn-skip" id="btn-skip" onclick="skipQuestion()">B·ªé QUA</button>
        </div>
        <button class="btn-next" id="btn-next" onclick="nextQuestion()">C√ÇU TI·∫æP THEO ‚Üí</button>
    </div>

    <div class="made-by">Made by PhamHien</div>
</div>

<script>
    const masterData = [
        { q: "ƒê·ªãa ch·ªâ do CPU t·∫°o ra ƒë∆∞·ª£c g·ªçi l√† ________ address.", a: "logical", hint: "Ng∆∞·ª£c l·∫°i v·ªõi physical." },
        { q: "Thi·∫øt b·ªã ph·∫ßn c·ª©ng th·ª±c hi·ªán √°nh x·∫° ƒë·ªãa ch·ªâ logic sang v·∫≠t l√Ω l√† ________.", a: "mmu", hint: "Vi·∫øt t·∫Øt c·ªßa Memory Management Unit." },
        { q: "ƒê·ªãa ch·ªâ v·∫≠t l√Ω = ƒê·ªãa ch·ªâ logic + ________ Register.", a: "relocation", hint: "Thanh ghi d√πng ƒë·ªÉ t√°i ƒë·ªãnh v·ªã." },
        { q: "Hi·ªán t∆∞·ª£ng t·ªïng b·ªô nh·ªõ ƒë·ªß nh∆∞ng kh√¥ng li√™n t·ª•c g·ªçi l√† ________ fragmentation.", a: "external", hint: "Ph√¢n m·∫£nh b√™n ngo√†i." },
        { q: "C∆° ch·∫ø qu·∫£n l√Ω b·ªô nh·ªõ chia RAM th√†nh c√°c kh·ªëi k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh l√† ________.", a: "paging", hint: "K·ªπ thu·∫≠t ph√¢n trang." },
        { q: "C√°c kh·ªëi k√≠ch th∆∞·ªõc c·ªë ƒë·ªãnh trong b·ªô nh·ªõ v·∫≠t l√Ω (RAM) g·ªçi l√† ________.", a: "frames", hint: "Khung trang." },
        { q: "C√°c kh·ªëi c√πng k√≠ch th∆∞·ªõc trong b·ªô nh·ªõ logic g·ªçi l√† ________.", a: "pages", hint: "C√°c trang." },
        { q: "ƒê·ªãa ch·ªâ logic g·ªìm: Page number (p) v√† Page ________ (d).", a: "offset", hint: "ƒê·ªô d·ªùi." },
        { q: "B·ªô nh·ªõ ƒë·ªám ph·∫ßn c·ª©ng gi√∫p tra c·ª©u b·∫£ng trang nhanh h∆°n l√† ________.", a: "tlb", hint: "Translation Lookaside Buffer." },
        { q: "B·ªô nh·ªõ d∆∞ th·ª´a b√™n trong m·ªôt frame ƒë√£ c·∫•p ph√°t g·ªçi l√† ________ fragmentation.", a: "internal", hint: "Ph√¢n m·∫£nh n·ªôi vi." },
        { q: "C√°ch chia b·ªô nh·ªõ d·ª±a tr√™n g√≥c nh√¨n c·ªßa l·∫≠p tr√¨nh vi√™n l√† ________.", a: "segmentation", hint: "Ph√¢n ƒëo·∫°n." },
        { q: "Trong b·∫£ng ph√¢n ƒëo·∫°n, m·ªói d√≤ng ch·ª©a Base v√† ________.", a: "limit", hint: "Gi·ªõi h·∫°n." },
        { q: "C∆° ch·∫ø cho ph√©p ch·∫°y ·ª©ng d·ª•ng l·ªõn h∆°n dung l∆∞·ª£ng RAM th·∫≠t l√† ________ memory.", a: "virtual", hint: "B·ªô nh·ªõ ·∫£o." },
        { q: "K·ªπ thu·∫≠t ch·ªâ n·∫°p trang v√†o RAM khi th·ª±c s·ª± c·∫ßn l√† ________ paging.", a: "demand", hint: "N·∫°p theo y√™u c·∫ßu." },
        { q: "L·ªói x·∫£y ra khi truy c·∫≠p v√†o trang ch∆∞a c√≥ trong RAM l√† Page ________.", a: "fault", hint: "L·ªói trang." },
        { q: "Thu·∫≠t to√°n thay th·∫ø trang t·ªëi ∆∞u nh·∫•t (l√Ω thuy·∫øt) l√† ________.", a: "optimal", hint: "Vi·∫øt t·∫Øt l√† OPT." },
        { q: "Thu·∫≠t to√°n thay th·∫ø trang d·ª±a tr√™n l·ªãch s·ª≠ s·ª≠ d·ª•ng g·∫ßn nh·∫•t l√† ________.", a: "lru", hint: "Least Recently Used." },
        { q: "Ngh·ªãch l√Ω khi tƒÉng s·ªë frame nh∆∞ng l·ªói trang l·∫°i tƒÉng l√† ________'s Anomaly.", a: "belady", hint: "B·∫Øt ƒë·∫ßu b·∫±ng ch·ªØ B." },
        { q: "Hi·ªán t∆∞·ª£ng h·ªá th·ªëng b·∫≠n swap trang li√™n t·ª•c khi·∫øn CPU r·∫£nh l√† ________.", a: "thrashing", hint: "Tr√¨ tr·ªá h·ªá th·ªëng." },
        { q: "M√¥ h√¨nh ngƒÉn ch·∫∑n Thrashing d·ª±a tr√™n t√≠nh c·ª•c b·ªô l√† ________-set model.", a: "working", hint: "T·∫≠p l√†m vi·ªác." }
    ];

    let quizData = [];
    let currentIdx = 0;
    let currentScore = 0;

    function celebrate() {
        confetti({
            particleCount: 100,
            spread: 70,
            origin: { y: 0.6 },
            colors: ['#2563eb', '#10b981', '#ffbb33']
        });
    }

    function startQuiz() {
        // Randomize questions
        quizData = [...masterData].sort(() => Math.random() - 0.5);
        currentIdx = 0;
        currentScore = 0;
        document.getElementById('score').innerText = `ƒêi·ªÉm: 0`;
        document.getElementById('start-menu').style.display = 'none';
        document.getElementById('quiz-content').style.display = 'block';
        loadQuestion();
    }

    function loadQuestion() {
        const data = quizData[currentIdx];
        document.getElementById('q-text').innerHTML = data.q.replace("________", "<span class='blank-space'>...</span>");
        document.getElementById('user-input').value = "";
        document.getElementById('user-input').disabled = false;
        document.getElementById('feedback').style.display = 'none';
        document.getElementById('btn-next').style.display = 'none';
        document.getElementById('action-buttons').style.display = 'flex';
        document.getElementById('q-number').innerText = `C√¢u h·ªèi ${currentIdx + 1}/${quizData.length}`;
        document.getElementById('p-fill').style.width = `${((currentIdx + 1) / quizData.length) * 100}%`;
        setTimeout(() => document.getElementById('user-input').focus(), 10);
    }

    function checkAnswer() {
        const userValue = document.getElementById('user-input').value.trim().toLowerCase();
        const correctAnswer = quizData[currentIdx].a.toLowerCase();
        const feedback = document.getElementById('feedback');
        
        if (userValue === "") return;

        if (userValue === correctAnswer) {
            feedback.innerText = "Ch√≠nh x√°c! üéâ";
            feedback.className = "feedback correct";
            currentScore += 5;
            document.getElementById('score').innerText = `ƒêi·ªÉm: ${currentScore}`;
            celebrate(); // Hi·ªáu ·ª©ng ph√°o hoa
            showNextState();
        } else {
            feedback.innerText = "Sai r·ªìi! G·ª£i √Ω: " + quizData[currentIdx].hint;
            feedback.className = "feedback wrong";
        }
        feedback.style.display = 'block';
    }

    function skipQuestion() {
        const feedback = document.getElementById('feedback');
        feedback.innerText = "ƒê√£ b·ªè qua. ƒê√°p √°n ƒë√∫ng l√†: " + quizData[currentIdx].a.toUpperCase();
        feedback.className = "feedback";
        feedback.style.background = "#f1f5f9";
        feedback.style.color = "#475569";
        feedback.style.display = 'block';
        showNextState();
    }

    function showNextState() {
        document.getElementById('user-input').disabled = true;
        document.getElementById('action-buttons').style.display = 'none';
        document.getElementById('btn-next').style.display = 'block';
        document.getElementById('btn-next').focus();
    }

    function nextQuestion() {
        currentIdx++;
        if (currentIdx < quizData.length) {
            loadQuestion();
        } else {
            showResult();
        }
    }

    function showResult() {
        const content = document.getElementById('quiz-content');
        content.innerHTML = `
            <div style="text-align: center; padding: 20px;">
                <h2 style="font-size: 2rem; color: #0f172a;">K·∫æT TH√öC!</h2>
                <div style="font-size: 3rem; font-weight: 800; color: var(--primary); margin: 20px 0;">${currentScore}/100</div>
                <p style="color: #64748b; margin-bottom: 25px;">Tuy·ªát v·ªùi! B·∫°n ƒë√£ ho√†n th√†nh b·ªô c√¢u h·ªèi.</p>
                <button class="btn-main" onclick="location.reload()">L√ÄM L·∫†I (TR·ªòN C√ÇU H·ªéI)</button>
            </div>
        `;
        // Ph√°o hoa l·ªõn khi k·∫øt th√∫c
        var duration = 3 * 1000;
        var end = Date.now() + duration;
        (function frame() {
            confetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0 } });
            confetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1 } });
            if (Date.now() < end) { requestAnimationFrame(frame); }
        }());
    }

    document.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            const isCheckVisible = document.getElementById('action-buttons').style.display !== 'none';
            const isStartVisible = document.getElementById('start-menu').style.display !== 'none';
            if (isStartVisible) startQuiz();
            else if (isCheckVisible) checkAnswer();
            else nextQuestion();
        }
    });
</script>
</body>
</html>